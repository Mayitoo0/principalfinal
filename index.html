<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokecard</title>
    <link rel="stylesheet" href="css.css">
    <link rel="icon" href="pngegg.png" type="image/png">
</head>

<body>
    <div id="principal">
        <img src="pngegg.png" id="pokemon" alt="">
        <div class="pokecard">
            <div class="muestrapokemon">
                <h1 id="titulo"></h1>
                <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
                <h1 id="numero"></h1>
                <div class="imges" id="imges-container">
                    <img src="" id="pok" alt="">
                    <img src="" id="pok2" alt="">
                </div>
            </div>
            <div class="daticos">
                <h1 id="altura"></h1>
                <h1 id="peso"></h1>
                <div id="tipo"></div>
                <h1>debilidades</h1>
                <div id="debilidades"></div>

            </div>
        </div>
        <div id="stats"></div>

        <script>
            function getRandomPokemonId() {
                return Math.floor(Math.random() * 400) + 1;
            }
            const typeColors = {
                normal: "#9FB4FF",
                fire: "#C5172E",
                water: "#00FFDE",
                electric: "#FCF259",
                grass: "#D2FF72",
                ice: "#98E4FF",
                fighting: "#C5172E",
                poison: "#F72798",
                ground: "#071952",
                flying: "#FF6464",
                psychic: "#FF8400",
                bug: "#16FF00",
                rock: "#B6A136",
                ghost: "#735797",
                dragon: "#6F35FC",
                dark: "#40128B",
                steel: "#31E1F7",
                fairy: "#B9FFF8",
            };

            document.addEventListener("DOMContentLoaded", async () => {
                const PokemonRandom = getRandomPokemonId();
                let res = await axios.get("https://pokeapi.co/api/v2/pokemon/" + PokemonRandom);
                document.getElementById("titulo").textContent = res.data.name;
                document.getElementById("numero").textContent = "#" + res.data.id;
                document.getElementById("altura").textContent = res.data.height + " dm";
                document.getElementById("peso").textContent = res.data.weight + " lb";
                document.getElementById("pok").src = res.data.sprites.other.dream_world.front_default;
                document.getElementById("pok2").src = res.data.sprites.other.home.front_default;
                document.getElementById("tipo").innerHTML = "";
                res.data.types.forEach((item) => {
                    const typeName = item.type.name;
                    const color = typeColors[typeName];
                    document.getElementById("tipo").innerHTML += `<button class="tipo" style="background-color:${color};color:#fff;border:none;border-radius:8px;padding:6px 14px;margin:2px 4px; font-family:'MiFuente', sans-serif; font-size: 3em;">${typeName}</button>`;
                });
                const tipos = res.data.types.map(item => item.type.name);

                document.getElementById("tipo").innerHTML = "";
                tipos.forEach((typeName) => {
                    const color = typeColors[typeName];
                    document.getElementById("tipo").innerHTML += `<button class="tipo" style="background-color:${color};color:#fff;border:none;border-radius:8px;padding:6px 14px;margin:2px 4px; font-family:'MiFuente', sans-serif; font-size: 3em;">${typeName}</button>`;
                });

                let debilidadesSet = new Set();
                for (let typeName of tipos) {
                    let tipoRes = await axios.get(`https://pokeapi.co/api/v2/type/${typeName}`);
                    let debilidades = tipoRes.data.damage_relations.double_damage_from;
                    debilidades.forEach(d => debilidadesSet.add(d.name));
                }
                document.getElementById("debilidades").innerHTML = "";
                debilidadesSet.forEach((typeName) => {
                    const color = typeColors[typeName];
                    document.getElementById("debilidades").innerHTML += `<button class="tipo" style="background-color:${color};color:#fff;border:none;border-radius:8px;padding:6px 14px;margin:2px 4px; font-family:'MiFuente', sans-serif; font-size: 3em;">${typeName}</button>`;
                });

                const statsContainer = document.getElementById("stats");
                statsContainer.innerHTML = "";

                const statNames = {
                    "hp": "HP",
                    "attack": "attack",
                    "defense": "defense",
                    "special-attack": "special-attack",
                    "special-defense": "special-defense",
                    "speed": "speed"
                };

                res.data.stats.forEach(stat => {
                    const name = stat.stat.name;
                    if (statNames[name]) {
                        const value = stat.base_stat;
                        const percent = Math.min(value, 150) / 1.5;
                        statsContainer.innerHTML += `
                    <div style="margin:10px 0;">
                        <span style="display:flex;flex-direction:row;width:100%;text-align:center;margin-right:8px;">${statNames[name]}</span>
                        <div style="display:flex;flex-direction:row;width:90%;height:20px;background:#fff;border-radius:8px;overflow:hidden;margin:8px;">
                            <div style="height:100%;width:${percent}%;background:#ffe600;"></div>
                        </div>
                        <span style="margin:8px;">${value}</span>
                    </div>
                `;
                    }
                });

                const colors = tipos.map(type => typeColors[type]);
                const gradient = colors.length > 1
                    ? `linear-gradient(135deg, ${colors.join(', ')})`
                    : `linear-gradient(135deg, ${colors[0]}, #fff)`;

                document.getElementById("imges-container").style.background = gradient;
            });
        </script>
    </div>
</body>

</html>